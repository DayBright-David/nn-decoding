singularity.enabled = true
container_dir = "/home/jgauthie/imgs"

process {
    executor = 'slurm'
    clusterOptions = '--qos=cpl'
    containerOptions = '-B /om -B /om2'

    withLabel: 'om.*' {
        time = '1d'
        queueSize = 15
    }

    withLabel: 'om_big' {
        memory = '32 GB'
    }

    withLabel: 'om_gpu.*' {
        time = '1d'
        queueSize = 3
        containerOptions = '-B /om -B /om2 --nv'
    }

    withLabel: 'om_gpu_tf' {
        container = "file://${container_dir}/tf1.12-gpu.simg"
    }
}
